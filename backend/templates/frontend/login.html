{ist.add('fa-eye-slash'); } else { input.type = 'password'; icon.classList.remove('fa-eye-slash'); icon.classList.add('fa-eye'); } }); // Form submission handler loginForm.addEventListener('submit', async function(e){ e.preventDefault(); const username = document.getElementById('username').value.trim(); const password = document.getElementById('password').value.trim(); // Show loading state FootballApp.setButtonLoading(loginButton, true); try { const response = await FootballApp.apiRequest('/auth/login/', { method: 'POST', body: JSON.stringify({ username: username, password: password }) }); // Store tokens and user data FootballApp.setAuthToken(response.access); localStorage.setItem('refresh', response.refresh); localStorage.setItem('user', JSON.stringify(response.user)); if (response.email_verified) { // Redirect to dashboard/profile window.location.href = "{% url 'profile' %}"; } else { // Show verification reminder verificationReminder.style.display = 'block'; FootballApp.showAlert('Please verify your email address to complete login', 'warning'); } } catch(err){ console.error('Login error:', err); FootballApp.showAlert(err.message || 'Login failed. Please check your credentials.', 'danger'); } finally { // Reset button state FootballApp.setButtonLoading(loginButton, false); } }); // Resend verification email resendVerificationLink.addEventListener('click', async function(e) { e.preventDefault(); if (!FootballApp.isAuthenticated()) { FootballApp.showAlert('Please login first', 'warning'); return; } try { await FootballApp.apiRequest('/auth/send-code/', { method: 'POST' }); FootballApp.showAlert('Verification email sent. Please check your inbox.', 'success'); } catch (error) { FootballApp.sho% extends 'frontend/base.html' %} {% load static %} {% block title %}Login | Football Match Prediction{% endblock %} {% block extra_css %} <style> :root { --primary: #3d5a80; --secondary: #98c1d9; --accent: #ee6c4d; --light: #e0fbfc; --dark: #293241; } body { background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%); min-height: 100vh; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; } .login-container { display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; } .card { border: none; border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: transform 0.3s ease; } .card:hover { transform: translateY(-5px); } .logo { text-align: center; margin-bottom: 1.5rem; } .logo i { font-size: 2.5rem; color: var(--accent); background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; } .btn-login { background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); color: white; border: none; font-weight: 600; transition: all 0.3s; } .btn-login:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); } .alert { border-radius: 8px; } </style> {% endblock %} {% block content %} <div class="login-container"> <div class="card p-4" style="width: 22rem;"> <div class="logo"> <i class="fa-solid fa-futbol"></i> </div> <h3 class="text-center mb-4">Login</h3> <div id="alert-container"></div> <form id="login-form"> {% csrf_token %} <div class="mb-3"> <label for="username" class="form-label">Username or Email</label> <input type="text" class="form-control" id="username" required> </div> <div class="mb-3"> <label for="password" class="form-label">Password</label> <div class="input-group"> <input type="password" class="form-control" id="password" required> <span class="input-group-text password-toggle" id="password-toggle"> <i class="fa fa-eye"></i> </span> </div> </div> <button type="submit" class="btn btn-login w-100" id="login-button"> <span class="button-text">Login</span> <div class="button-spinner spinner-border spinner-border-sm text-light" role="status" style="display: none;"> <span class="visually-hidden">Loading...</span> </div> </button> </form> <div class="d-flex justify-content-between mt-3"> <a href="{% url 'forgot-password' %}">Forgot Password?</a> <a href="{% url 'signup' %}">Sign Up</a> </div> <div id="verification-reminder" class="alert alert-warning mt-3" style="display: none;"> Your email is not verified. <a href="#" id="resend-verification">Resend verification email</a> </div> </div> </div> {% endblock %} {% block extra_js %} <script> document.addEventListener('DOMContentLoaded', function() { const loginForm = document.getElementById('login-form'); const alertContainer = document.getElementById('alert-container'); const loginButton = document.getElementById('login-button'); const buttonText = document.getElementById('button-text'); const buttonSpinner = document.getElementById('button-spinner'); const passwordToggle = document.getElementById('password-toggle'); const verificationReminder = document.getElementById('verification-reminder'); const resendVerificationLink = document.getElementById('resend-verification');  if (FootballApp.isAuthenticated()) { window.location.href = "{% url 'profile' %}"; } // Toggle password visibility passwordToggle.addEventListener('click', function() { const input = document.getElementById('password'); const icon = this.querySelector('i'); if (input.type === 'password') { input.type = 'text'; icon.classList.remove('fa-eye'); icon.classLwAlert('Failed to resend verification email.', 'danger'); } }); }); </script> {% endblock %}