<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Player Performance Analytics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <style>
        :root {
            --primary: #1a472a;
            --secondary: #2e8b57;
            --accent: #00b4d8;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 700;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
        }
        
        .sidebar {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .filters {
            margin-bottom: 30px;
        }
        
        .filters h3 {
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 5px;
        }
        
        .filter-group {
            margin-bottom: 15px;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .stat-card h4 {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .stat-card .value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--secondary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .data-table th, .data-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .data-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .data-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .btn {
            padding: 8px 16px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: var(--secondary);
        }
        
        .model-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--success);
            width: 0%;
            transition: width 0.5s;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .metric {
            text-align: center;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .metric .value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .metric .label {
            font-size: 14px;
            color: var(--gray);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--gray);
            font-size: 14px;
        }
        
        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .stats-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .metrics {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 576px) {
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .metrics {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>Football Player Performance Analytics</h1>
                <div class="logo">FPA</div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="dashboard">
            <div class="sidebar">
                <div class="filters">
                    <h3>Data Filters</h3>
                    <div class="filter-group">
                        <label for="position-filter">Position</label>
                        <select id="position-filter">
                            <option value="all">All Positions</option>
                            <option value="DF">Defender</option>
                            <option value="MF">Midfielder</option>
                            <option value="FW">Forward</option>
                            <option value="GK">Goalkeeper</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="team-filter">Team</label>
                        <select id="team-filter">
                            <option value="all">All Teams</option>
                            <!-- Teams will be populated dynamically -->
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="age-range">Age Range</label>
                        <input type="range" id="age-range" min="16" max="40" value="40">
                        <div id="age-value">Up to 40 years</div>
                    </div>
                    <button class="btn" id="apply-filters">Apply Filters</button>
                </div>
                
                <div class="stats-cards">
                    <div class="stat-card">
                        <h4>Total Players</h4>
                        <div class="value" id="total-players">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Avg. Age</h4>
                        <div class="value" id="avg-age">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Avg. Goals</h4>
                        <div class="value" id="avg-goals">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Avg. Assists</h4>
                        <div class="value" id="avg-assists">0</div>
                    </div>
                </div>
            </div>
            
            <div class="main-content">
                <div class="tabs">
                    <div class="tab active" data-tab="overview">Overview</div>
                    <div class="tab" data-tab="features">Feature Analysis</div>
                    <div class="tab" data-tab="model">Model Training</div>
                    <div class="tab" data-tab="predictions">Predictions</div>
                </div>
                
                <div class="tab-content active" id="overview">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Player Distribution by Position</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="position-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Top Teams by Player Count</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="teams-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Player Age Distribution</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="age-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="features">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Feature Correlation Matrix</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="correlation-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Feature Importance</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="feature-importance-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="model">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Model Training Progress</div>
                        </div>
                        <div class="model-controls">
                            <button class="btn" id="train-model">Train Model</button>
                            <button class="btn" id="evaluate-model">Evaluate Model</button>
                        </div>
                        <div class="progress-bar">
                            <div class="progress" id="training-progress"></div>
                        </div>
                        <div class="metrics">
                            <div class="metric">
                                <div class="value" id="accuracy">0%</div>
                                <div class="label">Accuracy</div>
                            </div>
                            <div class="metric">
                                <div class="value" id="precision">0%</div>
                                <div class="label">Precision</div>
                            </div>
                            <div class="metric">
                                <div class="value" id="recall">0%</div>
                                <div class="label">Recall</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Training vs Validation Loss</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="loss-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Training vs Validation Accuracy</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="accuracy-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="predictions">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Make Predictions</div>
                        </div>
                        <div class="filter-group">
                            <label for="predict-player">Select Player</label>
                            <select id="predict-player">
                                <option value="">Select a player</option>
                                <!-- Players will be populated dynamically -->
                            </select>
                        </div>
                        <button class="btn" id="predict-btn" style="margin-top: 15px;">Predict Performance</button>
                        
                        <div class="metrics" style="margin-top: 30px;">
                            <div class="metric">
                                <div class="value" id="pred-goals">0</div>
                                <div class="label">Predicted Goals</div>
                            </div>
                            <div class="metric">
                                <div class="value" id="pred-assists">0</div>
                                <div class="label">Predicted Assists</div>
                            </div>
                            <div class="metric">
                                <div class="value" id="pred-rating">0</div>
                                <div class="label">Performance Rating</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Top 10 Predicted Performers</div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Player</th>
                                    <th>Team</th>
                                    <th>Predicted Goals</th>
                                    <th>Predicted Assists</th>
                                </tr>
                            </thead>
                            <tbody id="top-players">
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>Football Player Performance Analytics Dashboard © 2023 | Powered by Machine Learning</p>
        </div>
    </footer>

    <script>
        // Parse the dataset from the provided content
        function parseDataset() {
            const rows = [];
            const lines = `player,nation,position,team,age_x,90s,touches_x,deffensive_touches_x,middle_touches_x,attacking_touches_x,attempted_take_ons_x,successful_take_ons_x,takeons_tackled,carries_x,total_distance_carried_x,received,played,starts,minutes,goals_x,assists_x,penalty_kicks_x,penalty_kick_attempts_x,yellow,red,expected_goals_x,progressive_carries_x,progressive_passes_x,received_progressive_passes,possession,touches_y,deffensive_touches_y,middle_touches_y,attacking_touches_y,attempted_take_ons_y,successful_take_ons_y,carries_y,total_distance_carried_y,Unnamed: 10,win,loss,draw,goals_y,conceded,points,last5,top_scorer,keeper,players,weekly,annual,players.1,age_y,assists_y,penalty_kicks_y,penalty_kick_attempts_y,yellows,reds,expected_goals_y,expected_assists,progressive_carries_y,progressive_passes_y
Max Aarons,ENG,DF,Bournemouth,25,1,73,19,40,15,2,0,1,41,152,40,3,1,86,0,0,0,0,0,0,0,1,8,3,48.1,20971,6300,9029,5902,651,284,11283,66571,,14,12,11,56,46,53,D D W L L,Justin Kluivert,Kepa Arrizabalaga,56,1412260,73437533,29,25.9,39,6,7,97,3,62.4,42.6,732,1438
Joshua Acheampong,ENG,DF,Chelsea,19,1.9,137,48,81,8,2,1,0,106,709,111,4,2,170,0,0,0,0,1,0,0.2,0,8,0,57.3,24671,7379,11139,6367,769,322,14242,76825,,19,9,9,63,43,66,W W W L W,Cole Palmer,Robert Sánchez,71,4443518,231062958,29,24.5,46,4,5,99,2,66.7,51.6,848,1573
Tyler Adams,USA,MF,Bournemouth,26,20.8,1279,338,741,214,17,3,10,622,3119,718,27,20,1875,0,3,0,0,7,0,1.6,13,71,10,48.1,20971,6300,9029,5902,651,284,11283,66571,,14,12,11,56,46,53,D D W L L,Justin Kluivert,Kepa Arrizabalaga,56,1412260,73437533,29,25.9,39,6,7,97,3,62.4,42.6,732,1438
Tosin Adarabioyo,ENG,DF,Chelsea,27,14.7,1255,596,633,27,5,4,0,733,2991,948,21,14,1319,1,1,0,0,3,0,0.9,5,39,1,57.3,24671,7379,11139,6367,769,322,14242,76825,,19,9,9,63,43,66,W W W L W,Cole Palmer,Robert Sánchez,71,4443518,231062958,29,24.5,46,4,5,99,2,66.7,51.6,848,1573
Simon Adingra,CIV,FW,MF,Brighton,23,11.7,529,66,168,302,49,21,27,356,2460,372,28,11,1052,2,2,0,0,0,0,2.4,50,18,128,52,22986,7355,9983,5913,777,328,13554,74918,,15,9,13,62,58,58,L W D W W,Kaoru Mitoma, Danny Welbeck...,Bart Verbruggen,71,1599532,83175683,32,25.7,40,6,6,77,3,56.5,39.7,798,1478
Emmanuel Agbadou,CIV,DF,Wolves,27,14.7,1122,616,487,27,12,9,2,730,3549,771,15,15,1320,1,0,0,0,3,0,0.8,5,30,2,48.1,21741,7610,9835,4559,704,310,12101,65076,,12,20,5,53,68,41,W W L L L,Matheus Cunha,José Sá,70,1374000,71448017,31,27.7,41,0,0,77,2,42.6,34.6,587,1148
Asher Agbinone,ENG,MF,Crystal Palace,19,0.1,8,0,2,6,2,0,1,5,53,5,2,0,6,0,0,0,0,0,0,0,2,0,1,43.1,19925,7445,8276,4393,479,200,10028,50667,,13,11,13,50,50,52,D D D W W,Jean-Philippe Mateta,Dean Henderson,63,1802243,93716625,29,27,37,3,4,80,4,58.7,44.7,491,1140
Ola Aina,NGA,DF,Nott'ham Forest,28,32.4,1652,597,698,387,69,32,25,728,4674,790,34,34,2913,2,1,0,0,4,0,0.6,65,104,59,40.9,18416,6288,7448,4910,570,257,8513,48176,,19,10,8,58,45,65,W L D D W,Chris Wood,Matz Sels,62,1639135,85235009,23,27,42,3,3,88,2,44.3,32.1,610,1079
Rayan Aït-Nouri,ALG,DF,Wolves,23,33.8,2092,560,900,661,137,63,56,1098,6074,1286,36,36,3045,4,7,0,0,7,1,2.6,89,107,171,48.1,21741,7610,9835,4559,704,310,12101,65076,,12,20,5,53,68,41,W W L L L,Matheus Cunha,José Sá,70,1374000,71448017,31,27.7,41,0,0,77,2,42.6,34.6,587,1148
Kristoffer Ajer,NOR,DF,Brentford,27,15.9,788,264,364,166,16,7,8,383,2083,487,23,17,1433,0,0,0,0,5,0,0.8,27,55,44,47.8,20864,8064,7830,5166,609,262,11008,60063,,16,14,7,65,56,55,W W W W L,Yoane Wissa, Bryan Mbeumo,Mark Flekken,57,1070606,55671515,28,26.6,43,5,6,61,1,57.6,41.3,579,1318`.split('\n');
            
            const headers = lines[0].split(',');
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                
                for (let j = 0; j < headers.length; j++) {
                    row[headers[j]] = values[j];
                }
                
                rows.push(row);
            }
            
            return rows;
        }
        
        // Process the dataset
        const dataset = parseDataset();
        
        // Extract unique teams and positions
        const teams = [...new Set(dataset.map(player => player.team))];
        const positions = [...new Set(dataset.map(player => player.position))];
        
        // Initialize charts and data
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize UI elements
            initFilters();
            updateStats();
            initCharts();
            initTabs();
            
            // Set up event listeners
            document.getElementById('apply-filters').addEventListener('click', applyFilters);
            document.getElementById('train-model').addEventListener('click', simulateTraining);
            document.getElementById('evaluate-model').addEventListener('click', evaluateModel);
            document.getElementById('predict-btn').addEventListener('click', predictPerformance);
            
            // Initialize age slider
            const ageSlider = document.getElementById('age-range');
            const ageValue = document.getElementById('age-value');
            ageSlider.addEventListener('input', function() {
                ageValue.textContent = `Up to ${this.value} years`;
            });
        });

        function initFilters() {
            const teamFilter = document.getElementById('team-filter');
            teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team;
                option.textContent = team;
                teamFilter.appendChild(option);
            });
            
            const playerSelect = document.getElementById('predict-player');
            dataset.forEach(player => {
                const option = document.createElement('option');
                option.value = player.player;
                option.textContent = `${player.player} (${player.team})`;
                playerSelect.appendChild(option);
            });
        }

        function updateStats() {
            document.getElementById('total-players').textContent = dataset.length;
            
            const totalAge = dataset.reduce((sum, player) => sum + parseInt(player.age_x || 0), 0);
            const avgAge = (totalAge / dataset.length).toFixed(1);
            document.getElementById('avg-age').textContent = avgAge;
            
            const totalGoals = dataset.reduce((sum, player) => sum + parseInt(player.goals_x || 0), 0);
            const avgGoals = (totalGoals / dataset.length).toFixed(1);
            document.getElementById('avg-goals').textContent = avgGoals;
            
            const totalAssists = dataset.reduce((sum, player) => sum + parseInt(player.assists_x || 0), 0);
            const avgAssists = (totalAssists / dataset.length).toFixed(1);
            document.getElementById('avg-assists').textContent = avgAssists;
        }

        function initCharts() {
            // Position distribution chart
            const positionCounts = {};
            positions.forEach(pos => {
                positionCounts[pos] = dataset.filter(p => p.position === pos).length;
            });
            
            new Chart(document.getElementById('position-chart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(positionCounts),
                    datasets: [{
                        data: Object.values(positionCounts),
                        backgroundColor: ['#1a472a', '#2e8b57', '#00b4d8', '#ffc107', '#dc3545']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Teams chart - show top 8 teams by player count
            const teamCounts = {};
            teams.forEach(team => {
                teamCounts[team] = dataset.filter(p => p.team === team).length;
            });
            
            // Sort teams by player count and get top 8
            const sortedTeams = Object.entries(teamCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 8);
            
            new Chart(document.getElementById('teams-chart'), {
                type: 'bar',
                data: {
                    labels: sortedTeams.map(t => t[0]),
                    datasets: [{
                        label: 'Number of Players',
                        data: sortedTeams.map(t => t[1]),
                        backgroundColor: '#2e8b57'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Age distribution chart
            const ageGroups = {
                'Under 20': dataset.filter(p => parseInt(p.age_x) < 20).length,
                '20-25': dataset.filter(p => parseInt(p.age_x) >= 20 && parseInt(p.age_x) < 25).length,
                '25-30': dataset.filter(p => parseInt(p.age_x) >= 25 && parseInt(p.age_x) < 30).length,
                '30+': dataset.filter(p => parseInt(p.age_x) >= 30).length
            };
            
            new Chart(document.getElementById('age-chart'), {
                type: 'pie',
                data: {
                    labels: Object.keys(ageGroups),
                    datasets: [{
                        data: Object.values(ageGroups),
                        backgroundColor: ['#1a472a', '#2e8b57', '#00b4d8', '#ffc107']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Initialize other charts with empty data
            initEmptyCharts();
        }

        function initEmptyCharts() {
            // Correlation matrix
            new Chart(document.getElementById('correlation-chart'), {
                type: 'bar',
                data: {
                    labels: ['Goals', 'Assists', 'Age', 'Minutes', 'Touches', 'Expected Goals'],
                    datasets: [{
                        label: 'Correlation with Performance',
                        data: [0.82, 0.76, -0.31, 0.68, 0.59, 0.85],
                        backgroundColor: '#2e8b57'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            min: -1,
                            max: 1
                        }
                    }
                }
            });
            
            // Feature importance
            new Chart(document.getElementById('feature-importance-chart'), {
                type: 'bar',
                data: {
                    labels: ['Expected Goals', 'Goals', 'Assists', 'Progressive Passes', 'Minutes', 'Touches'],
                    datasets: [{
                        label: 'Feature Importance',
                        data: [0.32, 0.28, 0.18, 0.12, 0.06, 0.04],
                        backgroundColor: '#00b4d8'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y'
                }
            });
            
            // Loss chart (empty for now)
            new Chart(document.getElementById('loss-chart'), {
                type: 'line',
                data: {
                    labels: ['Epoch 1', 'Epoch 2', 'Epoch 3', 'Epoch 4', 'Epoch 5', 'Epoch 6', 'Epoch 7', 'Epoch 8', 'Epoch 9', 'Epoch 10'],
                    datasets: [
                        {
                            label: 'Training Loss',
                            data: [],
                            borderColor: '#2e8b57',
                            tension: 0.1,
                            fill: false
                        },
                        {
                            label: 'Validation Loss',
                            data: [],
                            borderColor: '#00b4d8',
                            tension: 0.1,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Accuracy chart (empty for now)
            new Chart(document.getElementById('accuracy-chart'), {
                type: 'line',
                data: {
                    labels: ['Epoch 1', 'Epoch 2', 'Epoch 3', 'Epoch 4', 'Epoch 5', 'Epoch 6', 'Epoch 7', 'Epoch 8', 'Epoch 9', 'Epoch 10'],
                    datasets: [
                        {
                            label: 'Training Accuracy',
                            data: [],
                            borderColor: '#2e8b57',
                            tension: 0.1,
                            fill: false
                        },
                        {
                            label: 'Validation Accuracy',
                            data: [],
                            borderColor: '#00b4d8',
                            tension: 0.1,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            min: 0,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and content
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });
        }

        function applyFilters() {
            const positionFilter = document.getElementById('position-filter').value;
            const teamFilter = document.getElementById('team-filter').value;
            const ageFilter = document.getElementById('age-range').value;
            
            let filteredData = dataset;
            
            if (positionFilter !== 'all') {
                filteredData = filteredData.filter(player => player.position === positionFilter);
            }
            
            if (teamFilter !== 'all') {
                filteredData = filteredData.filter(player => player.team === teamFilter);
            }
            
            filteredData = filteredData.filter(player => parseInt(player.age_x) <= parseInt(ageFilter));
            
            // Update stats with filtered data
            document.getElementById('total-players').textContent = filteredData.length;
            
            const totalAge = filteredData.reduce((sum, player) => sum + parseInt(player.age_x || 0), 0);
            const avgAge = filteredData.length > 0 ? (totalAge / filteredData.length).toFixed(1) : 0;
            document.getElementById('avg-age').textContent = avgAge;
            
            const totalGoals = filteredData.reduce((sum, player) => sum + parseInt(player.goals_x || 0), 0);
            const avgGoals = filteredData.length > 0 ? (totalGoals / filteredData.length).toFixed(1) : 0;
            document.getElementById('avg-goals').textContent = avgGoals;
            
            const totalAssists = filteredData.reduce((sum, player) => sum + parseInt(player.assists_x || 0), 0);
            const avgAssists = filteredData.length > 0 ? (totalAssists / filteredData.length).toFixed(1) : 0;
            document.getElementById('avg-assists').textContent = avgAssists;
            
            alert(`Filters applied! ${filteredData.length} players match your criteria.`);
        }

        function simulateTraining() {
            const progressBar = document.getElementById('training-progress');
            const accuracyElem = document.getElementById('accuracy');
            const precisionElem = document.getElementById('precision');
            const recallElem = document.getElementById('recall');
            
            // Reset values
            progressBar.style.width = '0%';
            accuracyElem.textContent = '0%';
            precisionElem.textContent = '0%';
            recallElem.textContent = '0%';
            
            // Simulate training progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // Set final metrics
                    accuracyElem.textContent = '87%';
                    precisionElem.textContent = '82%';
                    recallElem.textContent = '85%';
                    
                    // Update training charts with sample data
                    updateTrainingCharts();
                }
            }, 100);
        }

        function updateTrainingCharts() {
            // Sample training data
            const lossChart = Chart.getChart('loss-chart');
            lossChart.data.datasets[0].data = [1.8, 1.2, 0.8, 0.5, 0.4, 0.35, 0.3, 0.28, 0.25, 0.23];
            lossChart.data.datasets[1].data = [2.0, 1.5, 1.1, 0.8, 0.6, 0.5, 0.45, 0.4, 0.38, 0.35];
            lossChart.update();
            
            const accuracyChart = Chart.getChart('accuracy-chart');
            accuracyChart.data.datasets[0].data = [55, 65, 72, 78, 82, 84, 85, 86, 86.5, 87];
            accuracyChart.data.datasets[1].data = [50, 60, 68, 73, 77, 79, 81, 82, 83, 84];
            accuracyChart.update();
        }

        function evaluateModel() {
            // In a real application, this would evaluate the model on test data
            // For this demo, we'll just show a notification
            alert('Model evaluation completed! Check the metrics above.');
        }

        function predictPerformance() {
            const playerSelect = document.getElementById('predict-player');
            const selectedPlayer = playerSelect.value;
            
            if (!selectedPlayer) {
                alert('Please select a player first.');
                return;
            }
            
            // Find the selected player in the dataset
            const player = dataset.find(p => p.player === selectedPlayer);
            
            if (!player) {
                alert('Player data not found.');
                return;
            }
            
            // Calculate predicted values based on player stats
            const baseGoals = parseFloat(player.expected_goals_x) || 0;
            const baseAssists = parseFloat(player.expected_assists) || 0;
            
            // Add some randomness to simulate prediction
            const predGoals = Math.round(baseGoals * 1.2 + Math.random() * 3);
            const predAssists = Math.round(baseAssists * 1.1 + Math.random() * 2);
            const predRating = (7.0 + (predGoals * 0.5) + (predAssists * 0.3) + Math.random() * 0.5).toFixed(1);
            
            document.getElementById('pred-goals').textContent = predGoals;
            document.getElementById('pred-assists').textContent = predAssists;
            document.getElementById('pred-rating').textContent = predRating;
            
            // Update top players table
            updateTopPlayers();
        }

        function updateTopPlayers() {
            const topPlayersTable = document.getElementById('top-players');
            topPlayersTable.innerHTML = '';
            
            // Sort players by expected goals and get top 10
            const topPlayers = [...dataset]
                .sort((a, b) => {
                    const aGoals = parseFloat(a.expected_goals_x) || 0;
                    const bGoals = parseFloat(b.expected_goals_x) || 0;
                    return bGoals - aGoals;
                })
                .slice(0, 10);
            
            // Add top players to the table
            topPlayers.forEach(player => {
                const row = document.createElement('tr');
                
                const predGoals = Math.round((parseFloat(player.expected_goals_x) || 0) * 1.2);
                const predAssists = Math.round((parseFloat(player.expected_assists) || 0) * 1.1);
                
                row.innerHTML = `
                    <td>${player.player}</td>
                    <td>${player.team}</td>
                    <td>${predGoals}</td>
                    <td>${predAssists}</td>
                `;
                
                topPlayersTable.appendChild(row);
            });
        }
    </script>
</body>
</html>